import{_ as b,a as f,h as d,r as u,o as _,c as k,b as a,d as n,w as r,G as C,e as c,B as L,j as w,F as x,p as T,f as S}from"./index-o0dRVNdH.js";import{u as A}from"./toastMessage-utfMM2qb.js";import{T as N}from"./ToastMessages-1rlgoMlF.js";var I={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"vue001",BASE_URL:"/lightcraft/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_APP_URL:h}=I,V={data(){return{products:[],tempProduct:{imagesUrl:[]},success:!1,navbarInitialized:!1}},components:{ToastMessages:N},methods:{...f(A,["addMessage"]),initNavbar(){if(this.navbarInitialized)return;const s=document.querySelector(".navbar-toggler"),e=document.getElementById("navbarSupportedContent");s&&e&&(s.removeAttribute("data-bs-toggle"),s.removeAttribute("data-bs-target"),s.onclick=l=>{l.preventDefault(),l.stopPropagation(),e.classList.contains("show")?(e.classList.remove("show"),s.setAttribute("aria-expanded","false"),s.classList.remove("collapsed")):(e.classList.add("show"),s.setAttribute("aria-expanded","true"),s.classList.add("collapsed"))},document.addEventListener("click",l=>{!s.contains(l.target)&&!e.contains(l.target)&&e.classList.contains("show")&&(e.classList.remove("show"),s.setAttribute("aria-expanded","false"),s.classList.remove("collapsed"))}),this.navbarInitialized=!0)},closeNavbar(){const s=document.getElementById("navbarSupportedContent"),e=document.querySelector(".navbar-toggler");s&&s.classList.contains("show")&&(s.classList.remove("show"),e&&e.setAttribute("aria-expanded","false"))},handleLogout(){this.closeNavbar(),this.logout()},checkLogin(){d.post(`${h}/api/user/check`).then(s=>{console.log(s.data.success),this.addMessage({title:"登入成功",content:s.data.message,style:"success"}),this.success=!0}).catch(s=>{console.log(s.response.data.message),this.$router.push("/login")})},logout(){d.post(`${h}/logout`).then(()=>{this.$router.push("/login")}).catch(s=>{console.error(s.response.data.message)})}},mounted(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");d.defaults.headers.common.Authorization=s,this.checkLogin(),this.$nextTick(()=>{this.initNavbar()})}},t=s=>(T("data-v-94201aed"),s=s(),S(),s),E={class:"navbar navbar-expand-lg modern-navbar"},P={class:"container-fluid"},R=t(()=>a("i",{class:"fas fa-lightbulb fs-5"},null,-1)),B=t(()=>a("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[a("span",{class:"navbar-toggler-icon"})],-1)),M={class:"collapse navbar-collapse",id:"navbarSupportedContent"},y={class:"navbar-nav me-auto mb-2 mb-lg-0"},D={class:"nav-item"},z=t(()=>a("i",{class:"fas fa-cube me-2"},null,-1)),U={class:"nav-item"},$=t(()=>a("i",{class:"fas fa-shopping-cart me-2"},null,-1)),q={class:"nav-item"},F=t(()=>a("i",{class:"fas fa-ticket-alt me-2"},null,-1)),O={class:"nav-item"},j=t(()=>a("i",{class:"fas fa-newspaper me-2"},null,-1)),G={class:"navbar-nav mb-2 mb-lg-0"},H={class:"nav-item"},J=t(()=>a("i",{class:"fas fa-sign-out-alt me-2"},null,-1)),K={class:"nav-item"},Q=t(()=>a("i",{class:"fas fa-home me-2"},null,-1)),W={class:"dashboard-main"},X={class:"container-fluid position-relative"};function Y(s,e,l,Z,v,o){const i=u("RouterLink"),p=u("ToastMessages"),m=u("RouterView");return _(),k(x,null,[a("nav",E,[a("div",P,[n(i,{class:"navbar-brand fs-5",to:"/admin/products"},{default:r(()=>[R,c(" LightCraft 後台 ")]),_:1}),B,a("div",M,[a("ul",y,[a("li",D,[n(i,{class:"nav-link",to:"/admin/products",onClick:o.closeNavbar},{default:r(()=>[z,c("產品列表 ")]),_:1},8,["onClick"])]),a("li",U,[n(i,{class:"nav-link",to:"/admin/order",onClick:o.closeNavbar},{default:r(()=>[$,c("訂單管理 ")]),_:1},8,["onClick"])]),a("li",q,[n(i,{class:"nav-link",to:"/admin/coupon",onClick:o.closeNavbar},{default:r(()=>[F,c("優惠券 ")]),_:1},8,["onClick"])]),a("li",O,[n(i,{class:"nav-link",to:"/admin/articles",onClick:o.closeNavbar},{default:r(()=>[j,c("文章列表 ")]),_:1},8,["onClick"])])]),a("ul",G,[a("li",H,[a("a",{href:"#",onClick:e[0]||(e[0]=C((...g)=>o.handleLogout&&o.handleLogout(...g),["prevent"])),class:"nav-link"},[J,c("登出 ")])]),a("li",K,[n(i,{class:"nav-link",to:"/",onClick:o.closeNavbar},{default:r(()=>[Q,c("回到前台 ")]),_:1},8,["onClick"])])])])])]),a("div",W,[a("div",X,[n(p),v.success===!0?(_(),L(m,{key:0})):w("",!0)])])],64)}const ts=b(V,[["render",Y],["__scopeId","data-v-94201aed"]]);export{ts as default};
