import{H as x,r as m,o as S,v as d,n as A,a as f,b as h,c as V,d as a,e as n,w as i,I,f as c,D as T,x as E,F as R,p as P,g as y}from"./index-AP1mULAj.js";import{u as B}from"./toastMessage-hYlk33Q3.js";import{_ as D}from"./ToastMessages-UH0x6kog.js";import{_ as N}from"./plugin-vueexport-helper-x3n3nnut.js";var $={VITE_APP_URL:"https://vue3-course-api.hexschool.io/v2",VITE_APP_PATH:"vue001",BASE_URL:"/lightcraft/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const o=r=>(P("data-v-064a52c2"),r=r(),y(),r),M={class:"navbar navbar-expand-lg modern-navbar"},U={class:"container-fluid"},q=o(()=>a("i",{class:"fas fa-lightbulb fs-5"},null,-1)),z=o(()=>a("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},[a("span",{class:"navbar-toggler-icon"})],-1)),F={class:"collapse navbar-collapse",id:"navbarSupportedContent"},H={class:"navbar-nav me-auto mb-2 mb-lg-0"},O={class:"nav-item"},j=o(()=>a("i",{class:"fas fa-cube me-2"},null,-1)),G={class:"nav-item"},J=o(()=>a("i",{class:"fas fa-shopping-cart me-2"},null,-1)),K={class:"nav-item"},Q=o(()=>a("i",{class:"fas fa-ticket-alt me-2"},null,-1)),W={class:"nav-item"},X=o(()=>a("i",{class:"fas fa-newspaper me-2"},null,-1)),Y={class:"navbar-nav mb-2 mb-lg-0"},Z={class:"nav-item"},aa=o(()=>a("i",{class:"fas fa-sign-out-alt me-2"},null,-1)),sa={class:"nav-item"},ta=o(()=>a("i",{class:"fas fa-home me-2"},null,-1)),ea={class:"dashboard-main"},oa={class:"container-fluid position-relative"},na={__name:"DashboardView",setup(r){const{VITE_APP_URL:u}=$,_=x(),b=B(),p=m(!1),v=m(!1),g=()=>{if(v.value)return;const s=document.querySelector(".navbar-toggler"),e=document.getElementById("navbarSupportedContent");s&&e&&(s.removeAttribute("data-bs-toggle"),s.removeAttribute("data-bs-target"),s.onclick=t=>{t.preventDefault(),t.stopPropagation(),e.classList.contains("show")?(e.classList.remove("show"),s.setAttribute("aria-expanded","false"),s.classList.remove("collapsed")):(e.classList.add("show"),s.setAttribute("aria-expanded","true"),s.classList.add("collapsed"))},document.addEventListener("click",t=>{!s.contains(t.target)&&!e.contains(t.target)&&e.classList.contains("show")&&(e.classList.remove("show"),s.setAttribute("aria-expanded","false"),s.classList.remove("collapsed"))}),v.value=!0)},l=()=>{const s=document.getElementById("navbarSupportedContent"),e=document.querySelector(".navbar-toggler");s&&s.classList.contains("show")&&(s.classList.remove("show"),e&&e.setAttribute("aria-expanded","false"))},k=()=>{d.post(`${u}/api/user/check`).then(s=>{b.addMessage({title:"登入成功",content:s.data.message,style:"success"}),p.value=!0}).catch(()=>{_.push("/login")})},L=()=>{d.post(`${u}/logout`).then(()=>{_.push("/login")}).catch(()=>{})},C=()=>{l(),L()};return S(()=>{const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");d.defaults.headers.common.Authorization=s,k(),A(()=>{g()})}),(s,e)=>{const t=f("RouterLink"),w=f("RouterView");return h(),V(R,null,[a("nav",M,[a("div",U,[n(t,{class:"navbar-brand fs-5",to:"/admin/products"},{default:i(()=>[q,c(" LightCraft 後台 ")]),_:1}),z,a("div",F,[a("ul",H,[a("li",O,[n(t,{class:"nav-link",to:"/admin/products",onClick:l},{default:i(()=>[j,c("產品列表 ")]),_:1})]),a("li",G,[n(t,{class:"nav-link",to:"/admin/order",onClick:l},{default:i(()=>[J,c("訂單管理 ")]),_:1})]),a("li",K,[n(t,{class:"nav-link",to:"/admin/coupon",onClick:l},{default:i(()=>[Q,c("優惠券 ")]),_:1})]),a("li",W,[n(t,{class:"nav-link",to:"/admin/articles",onClick:l},{default:i(()=>[X,c("文章列表 ")]),_:1})])]),a("ul",Y,[a("li",Z,[a("a",{href:"#",onClick:I(C,["prevent"]),class:"nav-link"},[aa,c("登出 ")])]),a("li",sa,[n(t,{class:"nav-link",to:"/",onClick:l},{default:i(()=>[ta,c("回到前台 ")]),_:1})])])])])]),a("div",ea,[a("div",oa,[n(D),p.value===!0?(h(),T(w,{key:0})):E("",!0)])])],64)}}},da=N(na,[["__scopeId","data-v-064a52c2"]]);export{da as default};
