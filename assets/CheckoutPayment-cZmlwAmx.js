import{H as L,i as M,s as q,r as u,k as c,o as w,b as m,c as p,d as a,E as V,J as B,F,q as R,t as e,x as J,u as O,h,p as P,g as A}from"./index-AP1mULAj.js";import{u as E}from"./cartStore-VmWaVlR-.js";import{_ as j}from"./plugin-vueexport-helper-x3n3nnut.js";import"./toastMessage-hYlk33Q3.js";const s=n=>(P("data-v-c3441e70"),n=n(),A(),n),H={class:"container my-5"},U=s(()=>a("h2",{class:"section-title mb-4"},"付款方式",-1)),z={class:"row"},G={class:"col-md-8"},K={class:"form-card mb-4"},Q=s(()=>a("h3",{class:"payment-subtitle mb-3"},"選擇付款方式",-1)),W={class:"payment-options"},X={class:"payment-option"},Y=s(()=>a("label",{for:"credit",class:"payment-label"},[a("span",{class:"payment-name"},"信用卡付款"),a("span",{class:"payment-desc"},"Visa, Mastercard, JCB")],-1)),Z=h('<div class="payment-option" data-v-c3441e70><input type="radio" id="transfer" name="payment" value="transfer" class="payment-radio" data-v-c3441e70><label for="transfer" class="payment-label" data-v-c3441e70><span class="payment-name" data-v-c3441e70>銀行轉帳</span><span class="payment-desc" data-v-c3441e70>收到款項後才出貨</span></label></div><div class="payment-option" data-v-c3441e70><input type="radio" id="atm" name="payment" value="atm" class="payment-radio" data-v-c3441e70><label for="atm" class="payment-label" data-v-c3441e70><span class="payment-name" data-v-c3441e70>ATM 轉帳</span><span class="payment-desc" data-v-c3441e70>收到款項確認後才出貨</span></label></div>',2),aa=s(()=>a("div",{class:"security-info mt-3 mb-4"},[a("div",{class:"d-flex align-items-center"},[a("i",{class:"bi bi-shield-lock me-2"}),a("span",null,"本站使用 SSL 加密技術，保障您的交易安全")])],-1)),ta={class:"col-md-4"},sa={class:"info-card"},ea=s(()=>a("h3",{class:"card-title"},"訂單資訊",-1)),oa={class:"order-items mb-3"},ca=s(()=>a("h4",{class:"items-subtitle mb-2"},"訂購商品",-1)),la={class:"item-info"},ia={class:"item-name"},na={class:"item-details"},da={class:"item-qty"},ra={class:"item-price"},va={class:"item-total"},ua={class:"info-item"},ma=s(()=>a("div",{class:"info-label"},"商品總額",-1)),pa={class:"info-value"},_a=h('<div class="info-item" data-v-c3441e70><div class="info-label" data-v-c3441e70>運費</div><div class="info-value" data-v-c3441e70>NT$ 0</div></div><div class="info-item" data-v-c3441e70><div class="info-label" data-v-c3441e70>稅金</div><div class="info-value" data-v-c3441e70>NT$ 0</div></div>',2),ha={key:0,class:"info-item discount"},fa=s(()=>a("div",{class:"info-label"},"優惠折扣",-1)),ya={class:"info-value"},ba={class:"info-item total"},ka=s(()=>a("div",{class:"info-label"},"總計",-1)),Sa={class:"info-value"},ga=h('<div class="terms-section mt-3" data-v-c3441e70><div class="form-check" data-v-c3441e70><input class="form-check-input" type="checkbox" id="terms" checked data-v-c3441e70><label class="form-check-label" for="terms" data-v-c3441e70> 我已閱讀並同意<a href="#" class="terms-link" data-v-c3441e70>服務條款</a>與<a href="#" class="terms-link" data-v-c3441e70>隱私政策</a></label></div></div>',1),Ta={class:"d-flex justify-content-between mt-4"},Ca=["disabled"],Na={__name:"CheckoutPayment",setup(n){const d=L(),S=M(),_=E(),{carts:g,total:T,final_total:C}=q(_),f=u("credit"),l=u(!1),i=u(null),o=u({carts:[],total:0,final_total:0}),N=c(()=>o.value.carts.length>0?o.value.carts:g.value),y=c(()=>o.value.total>0?o.value.total:T.value),b=c(()=>o.value.final_total>0?o.value.final_total:C.value),$=c(()=>Math.round(y.value).toLocaleString()),I=c(()=>Math.round(b.value).toLocaleString()),k=c(()=>Math.round(y.value-b.value)),x=c(()=>k.value>0),D=async()=>{if(!l.value)try{if(l.value=!0,!i.value){d.push("/checkout/address");return}await _.payOrder(i.value),localStorage.removeItem("orderCartData"),d.push(`/checkout/complete/${i.value}`)}catch{}finally{l.value=!1}};return w(()=>{_.getCart(),i.value=S.query.orderId;const r=localStorage.getItem("orderCartData");r&&(o.value=JSON.parse(r)),i.value||d.push("/checkout/address")}),(r,v)=>(m(),p("div",H,[U,a("div",z,[a("div",G,[a("div",K,[Q,a("div",W,[a("div",X,[V(a("input",{type:"radio",id:"credit",name:"payment",value:"credit","onUpdate:modelValue":v[0]||(v[0]=t=>f.value=t),class:"payment-radio"},null,512),[[B,f.value]]),Y]),Z])]),aa]),a("div",ta,[a("div",sa,[ea,a("div",oa,[ca,(m(!0),p(F,null,R(N.value,t=>(m(),p("div",{class:"order-item",key:t.id},[a("div",la,[a("div",ia,e(t.product.title),1),a("div",na,[a("span",da,"數量: "+e(t.qty),1),a("span",ra,"NT$ "+e(t.product.price.toLocaleString()),1)])]),a("div",va," NT$ "+e((t.product.price*t.qty).toLocaleString()),1)]))),128))]),a("div",ua,[ma,a("div",pa,"NT$ "+e($.value),1)]),_a,x.value?(m(),p("div",ha,[fa,a("div",ya," -NT$ "+e(k.value.toLocaleString()),1)])):J("",!0),a("div",ba,[ka,a("div",Sa,"NT$ "+e(I.value),1)]),ga])])]),a("div",Ta,[a("button",{class:"btn-secondary",onClick:v[1]||(v[1]=t=>O(d).back())},"上一步"),a("button",{class:"btn-primary",onClick:D,disabled:l.value},e(l.value?"處理中...":"確認付款並送出訂單"),9,Ca)])]))}},La=j(Na,[["__scopeId","data-v-c3441e70"]]);export{La as default};
